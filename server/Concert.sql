BEGIN TRANSACTION;
-- Create Theaters Table
CREATE TABLE IF NOT EXISTS "Theaters" (
    "TheaterID" TEXT NOT NULL UNIQUE,
    "Rows" INTEGER NOT NULL CHECK("Rows" > 0),
    "Columns" INTEGER NOT NULL CHECK("Columns" > 0),
	PRIMARY KEY("TheaterID")
);

-- Create Concerts Table
CREATE TABLE IF NOT EXISTS "Concerts" (
    "ConcertID" INTEGER NOT NULL,
    "ConcertName" TEXT NOT NULL UNIQUE,
    "TheaterID" TEXT NOT NULL ,
    "AvailableSeats" INTEGER CHECK("AvailableSeats" >= 0),
    FOREIGN KEY ("TheaterID") REFERENCES "Theaters"("TheaterID"),
	PRIMARY KEY("ConcertID" AUTOINCREMENT)
);

-- Create Users Table
CREATE TABLE IF NOT EXISTS "Users" (
    "UserID" INTEGER NOT NULL,
    "Name" TEXT NOT NULL UNIQUE,
    "Hash" TEXT NOT NULL,
    "Salt" TEXT NOT NULL,
    "Level" TEXT NOT NULL CHECK("Level" IN ('Basic', 'Loyal')),
	PRIMARY KEY("UserID" AUTOINCREMENT)
);

-- Create Seats Table
CREATE TABLE Seats (
    "ConcertID" TEXT NOT NULL,
    "SeatNumber" TEXT NOT NULL,
    "UserID" INTEGER,
    PRIMARY KEY ("ConcertID", "SeatNumber"),
    FOREIGN KEY ("ConcertID") REFERENCES "Concerts"("ConcertID"),
    FOREIGN KEY ("UserID") REFERENCES "Users"("UserID")
);

-- Insert data into Theaters
INSERT INTO "Theaters" VALUES
('Small', 4, 8),
('Medium', 6, 10),
('Large', 9, 14);

-- Insert data into Concerts
INSERT INTO "Concerts" VALUES
('1', 'Shakira', 'Small', 30),
('2', 'U2', 'Small', 30),
('3', 'Ligabue','Medium', 58),
('4', 'Mahmood','Medium', 58),
('5', 'Elisa','Large', 122),
('6', 'Madame','Large', 122);

-- Insert data into Users
INSERT INTO "Users" VALUES
(1, 'Gianni', 'a704ba6457a4ce295ca4f4fedc694a3b3c9c6896f9a4d7040ecd5f7ac66e4695', 'ERDJlaVaMw35PWcg', 'Loyal'),
(2, 'Marco', '14688ed742f469e68382ffb439e883080a2f5e979b3c0db385195ea97c633c29', 'YteCoFx5YUPhoqt9', 'Basic'),
(3, 'Laura', '256cd98f74bac0ad0ccfbb4ad1cc68943c7380b098e50a547cfdb41a73a99107', 'NYPD9LfKG9SywGLq', 'Loyal'),
(4, 'Marta', '9e6620deb20b5765dea59ef42b69ae4e9e3300100a6e25f3a7c3eedbef4a4af5', 'GEfJtWQbvtT0krjX', 'Basic'),
(5, 'Guglielmo', '37d1deca5a2f748e8677d197b45fd183a58aa4f80e648799c970f4ee9422040d', 'ct5PwoPnKKftvSUv', 'Loyal'),
(6, 'Sabrina', '9a93ac46bc45e96a9f9b653196698418f802e730443c536b6fc92a029bdda0a6', '43KlorJ1QkIPx4MK', 'Basic');

-- Popolare la tabella Seats con tutti i numeri di posto

-- Small Theater (4x8) per 1
INSERT INTO "Seats" VALUES
('1', '1A', 1),
('1', '1B', 1),
('1', '1C', NULL),
('1', '1D', NULL),
('1', '1E', NULL),
('1', '1F', NULL),
('1', '1G', NULL),
('1', '1H', NULL),
('1', '2A', NULL),
('1', '2B', NULL),
('1', '2C', NULL),
('1', '2D', NULL),
('1', '2E', NULL),
('1', '2F', NULL),
('1', '2G', NULL),
('1', '2H', NULL),
('1', '3A', NULL),
('1', '3B', NULL),
('1', '3C', NULL),
('1', '3D', NULL),
('1', '3E', NULL),
('1', '3F', NULL),
('1', '3G', NULL),
('1', '3H', NULL),
('1', '4A', NULL),
('1', '4B', NULL),
('1', '4C', NULL),
('1', '4D', NULL),
('1', '4E', NULL),
('1', '4F', NULL),
('1', '4G', NULL),
('1', '4H', NULL);

-- Small Theater (4x8) per 2
INSERT INTO "Seats" VALUES
('2', '1A', 1),
('2', '1B', 1),
('2', '1C', NULL),
('2', '1D', NULL),
('2', '1E', NULL),
('2', '1F', NULL),
('2', '1G', NULL),
('2', '1H', NULL),
('2', '2A', NULL),
('2', '2B', NULL),
('2', '2C', NULL),
('2', '2D', NULL),
('2', '2E', NULL),
('2', '2F', NULL),
('2', '2G', NULL),
('2', '2H', NULL),
('2', '3A', NULL),
('2', '3B', NULL),
('2', '3C', NULL),
('2', '3D', NULL),
('2', '3E', NULL),
('2', '3F', NULL),
('2', '3G', NULL),
('2', '3H', NULL),
('2', '4A', NULL),
('2', '4B', NULL),
('2', '4C', NULL),
('2', '4D', NULL),
('2', '4E', NULL),
('2', '4F', NULL),
('2', '4G', NULL),
('2', '4H', NULL);

-- Medium Theater (6x10) per 3
INSERT INTO "Seats" VALUES
('3', '1A', 2),
('3', '1B', 2),
('3', '1C', NULL),
('3', '1D', NULL),
('3', '1E', NULL),
('3', '1F', NULL),
('3', '1G', NULL),
('3', '1H', NULL),
('3', '1I', NULL),
('3', '1J', NULL),
('3', '2A', NULL),
('3', '2B', NULL),
('3', '2C', NULL),
('3', '2D', NULL),
('3', '2E', NULL),
('3', '2F', NULL),
('3', '2G', NULL),
('3', '2H', NULL),
('3', '2I', NULL),
('3', '2J', NULL),
('3', '3A', NULL),
('3', '3B', NULL),
('3', '3C', NULL),
('3', '3D', NULL),
('3', '3E', NULL),
('3', '3F', NULL),
('3', '3G', NULL),
('3', '3H', NULL),
('3', '3I', NULL),
('3', '3J', NULL),
('3', '4A', NULL),
('3', '4B', NULL),
('3', '4C', NULL),
('3', '4D', NULL),
('3', '4E', NULL),
('3', '4F', NULL),
('3', '4G', NULL),
('3', '4H', NULL),
('3', '4I', NULL),
('3', '4J', NULL),
('3', '5A', NULL),
('3', '5B', NULL),
('3', '5C', NULL),
('3', '5D', NULL),
('3', '5E', NULL),
('3', '5F', NULL),
('3', '5G', NULL),
('3', '5H', NULL),
('3', '5I', NULL),
('3', '5J', NULL),
('3', '6A', NULL),
('3', '6B', NULL),
('3', '6C', NULL),
('3', '6D', NULL),
('3', '6E', NULL),
('3', '6F', NULL),
('3', '6G', NULL),
('3', '6H', NULL),
('3', '6I', NULL),
('3', '6J', NULL);

-- Medium Theater (6x10) per 4
INSERT INTO "Seats" VALUES
('4', '1A', 2),
('4', '1B', 2),
('4', '1C', NULL),
('4', '1D', NULL),
('4', '1E', NULL),
('4', '1F', NULL),
('4', '1G', NULL),
('4', '1H', NULL),
('4', '1I', NULL),
('4', '1J', NULL),
('4', '2A', NULL),
('4', '2B', NULL),
('4', '2C', NULL),
('4', '2D', NULL),
('4', '2E', NULL),
('4', '2F', NULL),
('4', '2G', NULL),
('4', '2H', NULL),
('4', '2I', NULL),
('4', '2J', NULL),
('4', '3A', NULL),
('4', '3B', NULL),
('4', '3C', NULL),
('4', '3D', NULL),
('4', '3E', NULL),
('4', '3F', NULL),
('4', '3G', NULL),
('4', '3H', NULL),
('4', '3I', NULL),
('4', '3J', NULL),
('4', '4A', NULL),
('4', '4B', NULL),
('4', '4C', NULL),
('4', '4D', NULL),
('4', '4E', NULL),
('4', '4F', NULL),
('4', '4G', NULL),
('4', '4H', NULL),
('4', '4I', NULL),
('4', '4J', NULL),
('4', '5A', NULL),
('4', '5B', NULL),
('4', '5C', NULL),
('4', '5D', NULL),
('4', '5E', NULL),
('4', '5F', NULL),
('4', '5G', NULL),
('4', '5H', NULL),
('4', '5I', NULL),
('4', '5J', NULL),
('4', '6A', NULL),
('4', '6B', NULL),
('4', '6C', NULL),
('4', '6D', NULL),
('4', '6E', NULL),
('4', '6F', NULL),
('4', '6G', NULL),
('4', '6H', NULL),
('4', '6I', NULL),
('4', '6J', NULL);

-- Large Theater (9x14) per 5
INSERT INTO "Seats" VALUES
('5', '1A', 3),
('5', '1B', 3),
('5', '1C', 4),
('5', '1D', 4),
('5', '1E', NULL),
('5', '1F', NULL),
('5', '1G', NULL),
('5', '1H', NULL),
('5', '1I', NULL),
('5', '1J', NULL),
('5', '1K', NULL),
('5', '1L', NULL),
('5', '1M', NULL),
('5', '1N', NULL),
('5', '2A', NULL),
('5', '2B', NULL),
('5', '2C', NULL),
('5', '2D', NULL),
('5', '2E', NULL),
('5', '2F', NULL),
('5', '2G', NULL),
('5', '2H', NULL),
('5', '2I', NULL),
('5', '2J', NULL),
('5', '2K', NULL),
('5', '2L', NULL),
('5', '2M', NULL),
('5', '2N', NULL),
('5', '3A', NULL),
('5', '3B', NULL),
('5', '3C', NULL),
('5', '3D', NULL),
('5', '3E', NULL),
('5', '3F', NULL),
('5', '3G', NULL),
('5', '3H', NULL),
('5', '3I', NULL),
('5', '3J', NULL),
('5', '3K', NULL),
('5', '3L', NULL),
('5', '3M', NULL),
('5', '3N', NULL),
('5', '4A', NULL),
('5', '4B', NULL),
('5', '4C', NULL),
('5', '4D', NULL),
('5', '4E', NULL),
('5', '4F', NULL),
('5', '4G', NULL),
('5', '4H', NULL),
('5', '4I', NULL),
('5', '4J', NULL),
('5', '4K', NULL),
('5', '4L', NULL),
('5', '4M', NULL),
('5', '4N', NULL),
('5', '5A', NULL),
('5', '5B', NULL),
('5', '5C', NULL),
('5', '5D', NULL),
('5', '5E', NULL),
('5', '5F', NULL),
('5', '5G', NULL),
('5', '5H', NULL),
('5', '5I', NULL),
('5', '5J', NULL),
('5', '5K', NULL),
('5', '5L', NULL),
('5', '5M', NULL),
('5', '5N', NULL),
('5', '6A', NULL),
('5', '6B', NULL),
('5', '6C', NULL),
('5', '6D', NULL),
('5', '6E', NULL),
('5', '6F', NULL),
('5', '6G', NULL),
('5', '6H', NULL),
('5', '6I', NULL),
('5', '6J', NULL),
('5', '6K', NULL),
('5', '6L', NULL),
('5', '6M', NULL),
('5', '6N', NULL),
('5', '7A', NULL),
('5', '7B', NULL),
('5', '7C', NULL),
('5', '7D', NULL),
('5', '7E', NULL),
('5', '7F', NULL),
('5', '7G', NULL),
('5', '7H', NULL),
('5', '7I', NULL),
('5', '7J', NULL),
('5', '7K', NULL),
('5', '7L', NULL),
('5', '7M', NULL),
('5', '7N', NULL),
('5', '8A', NULL),
('5', '8B', NULL),
('5', '8C', NULL),
('5', '8D', NULL),
('5', '8E', NULL),
('5', '8F', NULL),
('5', '8G', NULL),
('5', '8H', NULL),
('5', '8I', NULL),
('5', '8J', NULL),
('5', '8K', NULL),
('5', '8L', NULL),
('5', '8M', NULL),
('5', '8N', NULL),
('5', '9A', NULL),
('5', '9B', NULL),
('5', '9C', NULL),
('5', '9D', NULL),
('5', '9E', NULL),
('5', '9F', NULL),
('5', '9G', NULL),
('5', '9H', NULL),
('5', '9I', NULL),
('5', '9J', NULL),
('5', '9K', NULL),
('5', '9L', NULL),
('5', '9M', NULL),
('5', '9N', NULL);

-- Large Theater (9x14) per 6
INSERT INTO "Seats" VALUES
('6', '1A', 3),
('6', '1B', 3),
('6', '1C', NULL),
('6', '1D', NULL),
('6', '1E', NULL),
('6', '1F', NULL),
('6', '1G', NULL),
('6', '1H', NULL),
('6', '1I', NULL),
('6', '1J', NULL),
('6', '1K', NULL),
('6', '1L', NULL),
('6', '1M', NULL),
('6', '1N', NULL),
('6', '2A', NULL),
('6', '2B', NULL),
('6', '2C', NULL),
('6', '2D', NULL),
('6', '2E', NULL),
('6', '2F', NULL),
('6', '2G', NULL),
('6', '2H', NULL),
('6', '2I', NULL),
('6', '2J', NULL),
('6', '2K', NULL),
('6', '2L', NULL),
('6', '2M', NULL),
('6', '2N', NULL),
('6', '3A', NULL),
('6', '3B', NULL),
('6', '3C', NULL),
('6', '3D', NULL),
('6', '3E', NULL),
('6', '3F', NULL),
('6', '3G', NULL),
('6', '3H', NULL),
('6', '3I', NULL),
('6', '3J', NULL),
('6', '3K', NULL),
('6', '3L', NULL),
('6', '3M', NULL),
('6', '3N', 4),
('6', '4A', 4),
('6', '4B', NULL),
('6', '4C', NULL),
('6', '4D', NULL),
('6', '4E', NULL),
('6', '4F', NULL),
('6', '4G', NULL),
('6', '4H', NULL),
('6', '4I', NULL),
('6', '4J', NULL),
('6', '4K', NULL),
('6', '4L', NULL),
('6', '4M', NULL),
('6', '4N', NULL),
('6', '5A', NULL),
('6', '5B', NULL),
('6', '5C', NULL),
('6', '5D', NULL),
('6', '5E', NULL),
('6', '5F', NULL),
('6', '5G', NULL),
('6', '5H', NULL),
('6', '5I', NULL),
('6', '5J', NULL),
('6', '5K', NULL),
('6', '5L', NULL),
('6', '5M', NULL),
('6', '5N', NULL),
('6', '6A', NULL),
('6', '6B', NULL),
('6', '6C', NULL),
('6', '6D', NULL),
('6', '6E', NULL),
('6', '6F', NULL),
('6', '6G', NULL),
('6', '6H', NULL),
('6', '6I', NULL),
('6', '6J', NULL),
('6', '6K', NULL),
('6', '6L', NULL),
('6', '6M', NULL),
('6', '6N', NULL),
('6', '7A', NULL),
('6', '7B', NULL),
('6', '7C', NULL),
('6', '7D', NULL),
('6', '7E', NULL),
('6', '7F', NULL),
('6', '7G', NULL),
('6', '7H', NULL),
('6', '7I', NULL),
('6', '7J', NULL),
('6', '7K', NULL),
('6', '7L', NULL),
('6', '7M', NULL),
('6', '7N', NULL),
('6', '8A', NULL),
('6', '8B', NULL),
('6', '8C', NULL),
('6', '8D', NULL),
('6', '8E', NULL),
('6', '8F', NULL),
('6', '8G', NULL),
('6', '8H', NULL),
('6', '8I', NULL),
('6', '8J', NULL),
('6', '8K', NULL),
('6', '8L', NULL),
('6', '8M', NULL),
('6', '8N', NULL),
('6', '9A', NULL),
('6', '9B', NULL),
('6', '9C', NULL),
('6', '9D', NULL),
('6', '9E', NULL),
('6', '9F', NULL),
('6', '9G', NULL),
('6', '9H', NULL),
('6', '9I', NULL),
('6', '9J', NULL),
('6', '9K', NULL),
('6', '9L', NULL),
('6', '9M', NULL),
('6', '9N', NULL);
COMMIT